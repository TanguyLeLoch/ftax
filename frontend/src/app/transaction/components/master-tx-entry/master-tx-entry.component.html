<div class="master-transaction">


  <mat-accordion>
    <mat-expansion-panel [(expanded)]="isExpanded" (expandedChange)="onExpandedChange($event)">
      <mat-expansion-panel-header>

        <mat-panel-description>
          <ng-container *ngIf="!isValid(); else placeholder">
            <fa-icon class="warning-icon" [icon]="faWarning"></fa-icon>
          </ng-container>
          <ng-template #placeholder>
            <div class="icon-placeholder"></div>
          </ng-template>
          <div class="tx-overview">

            <div class="tx-description-left">


              <ng-container *ngIf="getType() === 'BUY'">
                <span class="Buy">Buy</span>
              </ng-container>
              <ng-container *ngIf="getType() === 'SELL'">
                <span class="Sell">Sell</span>
              </ng-container>
              <ng-container *ngIf="getType() === 'SWAP'">
                <span class="Swap">Swap</span>
              </ng-container>
              <span class="date">{{ getDateTimeAtLocalFormat() }}</span>
            </div>
            <div class="tx-description-center">

              if swap i want on the left, a div with the sell the value/ amount/ price
              and on the right, a div with the buy the value/ amount/ price

              if buy or sell i want the value/ amount/ price etc on the middle

              <div *ngFor="let transaction of masterTransaction.transactions">
                <span class="token-value">
                {{ formatter.format(transaction.amount!) }} {{ getToken(transaction.token)?.name }}
              </span>
                <span class="fiat-value">
                {{ transaction.price ? formatter.format(transaction.price!) : '?' }}
                  &#36;/{{ getToken(transaction.token)?.ticker }}
              </span>
              </div>


            </div>

            <div class="tx-description-right">
              <!--                <span *ngIf="transaction.pnl?.value" class="pnl-value"-->
              <!--                      [ngClass]="{'positive': transaction.pnl!.value! >= 0, 'negative': transaction.pnl!.value! < 0}">-->
              <!--                    <fa-icon *ngIf="transaction.pnl!.value! >= 0" [icon]="faArrowUp"></fa-icon>-->
              <!--                    <fa-icon *ngIf="transaction.pnl!.value! < 0" [icon]="faArrowDown"></fa-icon>-->
              <!--                  {{ transaction.pnl!.value! | number: '1.2-2' }}-->
              <!--                </span>-->
              <!--            <span *ngIf="transaction.pnl?.errorMessage" class="pnl-error">-->
              <!--                  <fa-icon [icon]="faWarning"></fa-icon>-->
              <!--              {{ transaction.pnl!.errorMessage }}-->
              <!--                </span>-->

            </div>
          </div>
        </mat-panel-description>

      </mat-expansion-panel-header>

      <div class="expanded-panel-container" *ngIf="hasBeenExpanded">
        <div class="transaction-list">
          <div *ngFor="let tx of masterTransaction.transactions" class="transaction-item">
            <app-tx-entry [transaction]="tx"></app-tx-entry>
          </div>
        </div>
      </div>

    </mat-expansion-panel>
  </mat-accordion>
</div>
